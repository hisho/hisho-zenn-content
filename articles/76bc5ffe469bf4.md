---
title: "Hasuraã®dbã«Supabaseã‚’ä½¿ã†"
emoji: "ğŸš§"
type: "tech"
topics: ['hasura', 'supabase']
published: true
---

:::message alert
2022/11/04æ™‚ç‚¹ã§ã®æƒ…å ±ã§ã™ã€‚
Hasuraã‚‚Supabaseã‚’ã¡ã‚‡ã£ã¨è§¦ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„è©¦ã—ãŸè¨˜äº‹ã§ã™ã€‚
ãšã£ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¦ãŠãã®ã‚‚ã‚‚ã£ãŸã„ãªã„ã®ã§å…¬é–‹ã—ã¾ã—ãŸã€‚
Hasuraã®å…¬å¼ã¨ã»ã¨ã‚“ã©åŒã˜å†…å®¹ã§ã™ã€‚
https://hasura.io/docs/latest/databases/connect-db/cloud-databases/supabase
:::

# Hasuraã®graphqlã‚’è©¦ã™

## description
- Hasuraã®dbã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Herokuã ãŒHerokuã¯æœ‰æ–™ã«ãªã‚‹ã®ã§Supabaseã‚’ä½¿ç”¨ã™ã‚‹


## Hasuraã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1.1 Hasuraã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—Supabaseã‚’ç¹‹ãå‰ã¾ã§ã®è¨­å®šã‚’ã™ã‚‹

![](/images/hasura-with-supabase/create-hasura-project-1.png)

1.2 Hasuraã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ç§»å‹•ã™ã‚‹
â€» HASURA_GRAPHQL_ADMIN_SECRETã¯ä¸è¦ãªã®ã§å‰Šé™¤ã—ã¦ãŠã
![](/images/hasura-with-supabase/create-hasura-project-2.png)

1.3 Hasuraã®Data Managerã«ç§»å‹•ã™ã‚‹
![](/images/hasura-with-supabase/create-hasura-project-3.png)

1.4 Hasuraã®Connect Databaseç”»é¢ã«é·ç§»ã—ãŸã‚‰ä¸€æ—¦çµ‚äº†
![](/images/hasura-with-supabase/create-hasura-project-4.gif)

## Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1.1 Supabaseã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
![](/images/hasura-with-supabase/create-supabase-project-1.png)

1.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
Name,Database Password,Region,Pricing Planã‚’å…¥åŠ›ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
![](/images/hasura-with-supabase/create-supabase-project-2.png)

## Hasuraã¨Supabaseã‚’ç¹‹ã

### Hasura x Supabase
https://hasura.io/docs/latest/databases/connect-db/cloud-databases/supabase

1.2 settingsã«ç§»å‹•ã™ã‚‹
![](/images/hasura-with-supabase/connect-hasura-supabase-1.png)

1.3 settings/Databaseã«ç§»å‹•ã™ã‚‹
![](/images/hasura-with-supabase/connect-hasura-supabase-2.png)

1.4 Connection stringã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
![](/images/hasura-with-supabase/connect-hasura-supabase-3.png)

1.4 Hasuraã®Connect Databaseç”»é¢ã«æˆ»ã‚ŠConnection stringã‚’è²¼ã‚Šä»˜ã‘ã‚‹
![](/images/hasura-with-supabase/connect-hasura-supabase-4.png)

### Adding data source failed
ã¨å‡ºãŸå ´åˆ
```json
{
  "definition": "supabase",
  "message": "could not translate host name \"hogehoge.supabase.co\" to address: Name or service not known\n",
  "name": "source supabase",
  "reason": "Inconsistent object: connection error",
  "type": "source"
}
```

ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«`@`ãªã©ã®URLã«ä½¿ç”¨ã§ããªã„æ–‡å­—ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸæ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹    
https://zenn.dev/konnyaku256/articles/how-to-resolve-invalid-hostname-in-hasura

### é©å½“ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ç½®ãæ›ãˆã‚Œã°OK
```shell:node.js
node -e 'console.log(encodeURI("ä»»æ„ã®URL"))'
```

1.5 ã“ã®ç”»é¢ã«ãªã£ãŸã‚‰çµ‚ã‚ã‚Š
![](/images/hasura-with-supabase/connect-hasura-supabase-5.png)